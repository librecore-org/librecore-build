sudo: true
dist: trusty

language: c

git:
  submodules: false

branches:
  only:
  - master

cache:
  - ccache

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-6

before_install:
    - wget -c http://zamaudio.com/mbox2/librecore-xgcc_1.46-3.fc25_amd64.deb
    - sudo dpkg -i librecore-xgcc_1.46-3.fc25_amd64.deb
    - export PATH=${PATH}:/opt/xgcc-1.46/bin
    - i386-elf-gcc --version
    - arm-eabi-gcc --version
    - aarch64-elf-gcc --version

script: make get-dev-librecore && make test-all
